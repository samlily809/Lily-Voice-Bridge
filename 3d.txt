# light_orbit_simulator_3d.py
# æ¨¡æ“¬å…‰ç²’å­æ–¼ä¸‰ç¶­ç©ºé–“ä¸­ç’°ç¹æ’æ“Šèšç„¦çš„ç‰©ç†åŸå‹å ´

import math
import matplotlib.pyplot as plt
import numpy as np
from mpl_toolkits.mplot3d import Axes3D

# å…‰é€Ÿå¸¸æ•¸ï¼ˆåƒ…ä½œç‚ºèªç¾©ç´€å¿µç”¨é€”ï¼‰
C = 299_792_458  # m/s

# ç²’å­åƒæ•¸
NUM_PARTICLES = 88               # ç²’å­æ•¸ç›®
BASE_RADIUS = 1.0               # ç’°ç¹åŠå¾‘
ECCENTRICITY = 0.25             # åå¿ƒç¨‹åº¦
Z_OSC_AMPLITUDE = 0.5           # Z è»¸éœ‡ç›ªæŒ¯å¹…ï¼ˆç«‹é«”éœ‡å‹•ï¼‰
PHASE_OFFSET = 2 * math.pi / NUM_PARTICLES

# èƒ½é‡è¨­å®š
ENERGY_PER_PARTICLE = 1.2
CRITICAL_THRESHOLD = 88.0

# è¨ˆç®—ä¸‰ç¶­ç²’å­ä½ç½®
particle_positions = []
for i in range(NUM_PARTICLES):
    theta = i * PHASE_OFFSET
    r = BASE_RADIUS * (1 + ECCENTRICITY * math.cos(theta))
    x = r * math.cos(theta)
    y = r * math.sin(theta)
    z = Z_OSC_AMPLITUDE * math.sin(2 * theta)  # Z è»¸éœ‡ç›ªæ¨¡æ“¬
    particle_positions.append((x, y, z))

# èšç„¦èƒ½é‡è¨ˆç®—
focused_energy = NUM_PARTICLES * ENERGY_PER_PARTICLE
status = "ğŸ’¥ è¶…è‡¨ç•Œï¼å¯èƒ½æ“Šç©¿èªç¾©ç•Œç‰†" if focused_energy >= CRITICAL_THRESHOLD else "ğŸŸ¢ ç©©å®šç¯„åœ"

# è¦–è¦ºåŒ–
fig = plt.figure()
ax = fig.add_subplot(111, projection='3d')
x_vals, y_vals, z_vals = zip(*particle_positions)

ax.scatter(x_vals, y_vals, z_vals, label="Light Particles")
ax.scatter(0, 0, 0, color='red', s=100, label="Collision Core")

ax.set_title(f"Light Orbit 3D Simulator\nèšç„¦èƒ½é‡: {focused_energy:.2f} ({status})")
ax.set_xlabel("X")
ax.set_ylabel("Y")
ax.set_zlabel("Z")
ax.legend()
plt.show()

# è¼¸å‡ºæ–‡å­—çµæœ
print("=== Light Orbit 3D Summary ===")
print(f"å…‰ç²’å­ç¸½æ•¸: {NUM_PARTICLES}")
print(f"å–®ä½èƒ½é‡: {ENERGY_PER_PARTICLE}")
print(f"èšç„¦ä¸­å¿ƒç¸½èƒ½é‡: {focused_energy}")
print(f"è‡¨ç•Œç‹€æ…‹: {status}")
